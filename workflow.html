<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoScan - App Workflow</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 40px;
            font-size: 1.2em;
        }

        .tech-stack {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 50px;
            flex-wrap: wrap;
        }

        .tech-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9em;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .workflow {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .step {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            padding: 25px;
            background: #f7fafc;
            border-radius: 15px;
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
            position: relative;
        }

        .step:hover {
            transform: translateX(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .step-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-size: 1.5em;
            color: #2d3748;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .step-description {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .step-details {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
        }

        .step-details ul {
            margin-left: 20px;
            color: #4a5568;
        }

        .step-details li {
            margin: 8px 0;
            line-height: 1.5;
        }

        .component-tag {
            display: inline-block;
            background: #edf2f7;
            color: #667eea;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 600;
            margin-right: 8px;
            margin-top: 8px;
        }

        .arrow {
            text-align: center;
            font-size: 2em;
            color: #667eea;
            margin: 10px 0;
        }

        .api-flow {
            background: #e6fffa;
            border-left-color: #38b2ac;
        }

        .db-flow {
            background: #fef5e7;
            border-left-color: #f39c12;
        }

        .ai-flow {
            background: #fce7f3;
            border-left-color: #ec4899;
        }

        .output-box {
            background: #f0fff4;
            border: 2px dashed #48bb78;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            font-style: italic;
            color: #2d3748;
        }

        .mvp-features {
            margin-top: 50px;
            padding: 30px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            color: white;
        }

        .mvp-features h2 {
            margin-bottom: 20px;
            font-size: 2em;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .feature-card h3 {
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            .step {
                flex-direction: column;
            }

            .step-number {
                width: 40px;
                height: 40px;
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåø EcoScan Workflow</h1>
        <p class="subtitle">Mobile clothing scanner with AI-powered eco-impact analysis</p>

        <div class="tech-stack">
            <span class="tech-badge">üì± Expo + React Native</span>
            <span class="tech-badge">‚ö° FastAPI (Python)</span>
            <span class="tech-badge">üóÑÔ∏è Supabase</span>
            <span class="tech-badge">ü§ñ Gemini Vision + Text</span>
        </div>

        <div class="workflow">
            <!-- Step 1 -->
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <div class="step-title">üì∏ User Scans Clothing Tag</div>
                    <div class="step-description">
                        User opens the mobile app and taps "Scan Item" button, which activates the device camera.
                    </div>
                    <span class="component-tag">React Native Camera</span>
                    <span class="component-tag">Expo Image Picker</span>
                    <div class="step-details">
                        <ul>
                            <li><strong>Component:</strong> Expo Camera or expo-image-picker</li>
                            <li><strong>Action:</strong> Capture photo of clothing tag</li>
                            <li><strong>Output:</strong> Image file (JPEG/PNG)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="arrow">‚¨áÔ∏è</div>

            <!-- Step 2 -->
            <div class="step api-flow">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-title">üì§ Send Image to Backend</div>
                    <div class="step-description">
                        Mobile app uploads the captured image to the FastAPI backend via POST request.
                    </div>
                    <span class="component-tag">Axios/Fetch API</span>
                    <span class="component-tag">FastAPI Endpoint</span>
                    <div class="step-details">
                        <ul>
                            <li><strong>Endpoint:</strong> POST /api/scan</li>
                            <li><strong>Request:</strong> multipart/form-data with image</li>
                            <li><strong>Headers:</strong> Content-Type, Authorization (if needed)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="arrow">‚¨áÔ∏è</div>

            <!-- Step 3 -->
            <div class="step ai-flow">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-title">üîç Extract Info with Gemini Vision</div>
                    <div class="step-description">
                        Backend sends the image to Google Gemini Vision API to extract structured data from the clothing tag.
                    </div>
                    <span class="component-tag">Gemini Vision API</span>
                    <span class="component-tag">OCR + Understanding</span>
                    <div class="step-details">
                        <ul>
                            <li><strong>Extract:</strong> Material composition (e.g., "100% polyester", "60% cotton 40% linen")</li>
                            <li><strong>Extract:</strong> Country of origin (e.g., "Made in Bangladesh", "Portugal")</li>
                            <li><strong>Fallback:</strong> If unclear, return partial data + confidence score</li>
                            <li><strong>User editable:</strong> Allow manual correction in app if needed</li>
                        </ul>
                    </div>
                    <div class="output-box">
                        üìã Example Output: { material: "100% Polyester", country: "Bangladesh", confidence: 0.92 }
                    </div>
                </div>
            </div>

            <div class="arrow">‚¨áÔ∏è</div>

            <!-- Step 4 -->
            <div class="step db-flow">
                <div class="step-number">4</div>
                <div class="step-content">
                    <div class="step-title">üìä Calculate Eco-Score</div>
                    <div class="step-description">
                        Backend applies scoring logic using material and country data against rules stored in Supabase.
                    </div>
                    <span class="component-tag">Python Logic</span>
                    <span class="component-tag">Supabase Query</span>
                    <div class="step-details">
                        <ul>
                            <li><strong>Material Score:</strong> Query Supabase "materials" table for CO‚ÇÇ footprint, water usage, microplastic risk</li>
                            <li><strong>Country Score:</strong> Query "countries" table for labor conditions, transportation impact</li>
                            <li><strong>Algorithm:</strong> Weighted average ‚Üí Final Eco-Score (0-100 or A-F grade)</li>
                            <li><strong>Flags:</strong> Generate tags like "High Microplastic", "Low Carbon", "Fair Labor Risk"</li>
                        </ul>
                    </div>
                    <div class="output-box">
                        üéØ Example: Eco-Score = 42/100 (Grade: D) with flags: ["High Microplastic", "Medium Labor Risk"]
                    </div>
                </div>
            </div>

            <div class="arrow">‚¨áÔ∏è</div>

            <!-- Step 5 -->
            <div class="step ai-flow">
                <div class="step-number">5</div>
                <div class="step-content">
                    <div class="step-title">üí¨ Generate AI Explanation</div>
                    <div class="step-description">
                        Backend calls Gemini Text model to create a human-readable explanation of the eco-score.
                    </div>
                    <span class="component-tag">Gemini Text API</span>
                    <span class="component-tag">Natural Language Generation</span>
                    <div class="step-details">
                        <ul>
                            <li><strong>Input:</strong> Material, country, eco-score, impact flags</li>
                            <li><strong>Prompt:</strong> "Explain in 2-3 sentences why this clothing item scored [X] based on its material and origin"</li>
                            <li><strong>Output:</strong> Conversational, educational explanation</li>
                            <li><strong>Optional:</strong> Add 2-3 improvement tips ("Choose organic cotton next time")</li>
                        </ul>
                    </div>
                    <div class="output-box">
                        üí° Example: "This item is made from polyester, which tends to shed microplastics and has a high carbon footprint. It was produced in a region with medium labor risk. Consider choosing natural fibers or recycled materials for a better eco-score."
                    </div>
                </div>
            </div>

            <div class="arrow">‚¨áÔ∏è</div>

            <!-- Step 6 -->
            <div class="step db-flow">
                <div class="step-number">6</div>
                <div class="step-content">
                    <div class="step-title">üíæ Store Scan History</div>
                    <div class="step-description">
                        Backend saves the scan result to Supabase for user history and analytics.
                    </div>
                    <span class="component-tag">Supabase Insert</span>
                    <span class="component-tag">User History</span>
                    <div class="step-details">
                        <ul>
                            <li><strong>Table:</strong> "scans" with columns: user_id, timestamp, material, country, eco_score, explanation</li>
                            <li><strong>Purpose:</strong> Enable "My Scans" history view in app</li>
                            <li><strong>Analytics:</strong> Calculate average wardrobe impact, show trends over time</li>
                            <li><strong>Privacy:</strong> Optional anonymous mode (no user_id)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="arrow">‚¨áÔ∏è</div>

            <!-- Step 7 -->
            <div class="step">
                <div class="step-number">7</div>
                <div class="step-content">
                    <div class="step-title">üì± Display Results in App</div>
                    <div class="step-description">
                        FastAPI returns JSON response to mobile app, which renders the results beautifully.
                    </div>
                    <span class="component-tag">React Native UI</span>
                    <span class="component-tag">Expo Components</span>
                    <div class="step-details">
                        <ul>
                            <li><strong>Large Eco-Score:</strong> Prominent display with color coding (green = good, red = poor)</li>
                            <li><strong>Material & Origin:</strong> Clear badges or labels</li>
                            <li><strong>AI Explanation:</strong> Readable paragraph with icon</li>
                            <li><strong>Impact Tags:</strong> Small chips showing "Microplastic Risk", "Water Usage", etc.</li>
                            <li><strong>Actions:</strong> "Save to History", "Share Result", "Learn More"</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- MVP Features Section -->
        <div class="mvp-features">
            <h2>‚ú® MVP Features Breakdown</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h3>üì∏ Core Scanning</h3>
                    <p>Camera integration with Expo, image upload to backend, basic error handling</p>
                </div>
                <div class="feature-card">
                    <h3>ü§ñ AI Vision</h3>
                    <p>Gemini Vision API integration, material & country extraction with confidence scores</p>
                </div>
                <div class="feature-card">
                    <h3>üìä Scoring Engine</h3>
                    <p>Simple rules-based scoring system, Supabase materials/countries tables, weighted algorithm</p>
                </div>
                <div class="feature-card">
                    <h3>üí¨ Explanations</h3>
                    <p>Gemini Text API for natural language explanations, contextual tips</p>
                </div>
                <div class="feature-card">
                    <h3>üìú History</h3>
                    <p>Scan history saved to Supabase, "My Scans" screen, average impact calculation</p>
                </div>
                <div class="feature-card">
                    <h3>üé® Clean UI</h3>
                    <p>Modern React Native components, smooth transitions, accessible design</p>
                </div>
            </div>
        </div>

        <!-- Data Flow Architecture -->
        <div style="margin-top: 50px; padding: 30px; background: #edf2f7; border-radius: 15px;">
            <h2 style="color: #2d3748; margin-bottom: 20px;">üèóÔ∏è System Architecture</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                <div style="background: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <div style="font-size: 2em; margin-bottom: 10px;">üì±</div>
                    <h3 style="color: #667eea; margin-bottom: 10px;">Frontend</h3>
                    <p style="color: #4a5568; font-size: 0.9em;">Expo + React Native<br>Camera, UI, Navigation</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <div style="font-size: 2em; margin-bottom: 10px;">‚ö°</div>
                    <h3 style="color: #667eea; margin-bottom: 10px;">Backend</h3>
                    <p style="color: #4a5568; font-size: 0.9em;">Python + FastAPI<br>API, Logic, AI Calls</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <div style="font-size: 2em; margin-bottom: 10px;">üóÑÔ∏è</div>
                    <h3 style="color: #667eea; margin-bottom: 10px;">Database</h3>
                    <p style="color: #4a5568; font-size: 0.9em;">Supabase<br>Rules, History, Users</p>
                </div>
                <div style="background: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <div style="font-size: 2em; margin-bottom: 10px;">ü§ñ</div>
                    <h3 style="color: #667eea; margin-bottom: 10px;">AI Services</h3>
                    <p style="color: #4a5568; font-size: 0.9em;">Google Gemini<br>Vision + Text Models</p>
                </div>
            </div>
        </div>

        <!-- Implementation Notes -->
        <div style="margin-top: 30px; padding: 25px; background: #fff5f5; border-left: 5px solid #f56565; border-radius: 10px;">
            <h3 style="color: #c53030; margin-bottom: 15px;">‚ö†Ô∏è Implementation Notes</h3>
            <ul style="color: #4a5568; line-height: 1.8; margin-left: 20px;">
                <li><strong>API Keys:</strong> Secure Gemini API keys in backend env variables, never expose in mobile app</li>
                <li><strong>Rate Limiting:</strong> Implement basic rate limiting on FastAPI to prevent abuse</li>
                <li><strong>Image Size:</strong> Compress images on mobile before upload (max 2MB) to save bandwidth</li>
                <li><strong>Error Handling:</strong> Graceful fallbacks if AI fails (manual input, retry options)</li>
                <li><strong>Offline Mode:</strong> Consider caching rules data for basic scoring without internet</li>
                <li><strong>Testing:</strong> Test with various tag types (printed, sewn, faded) to ensure robustness</li>
            </ul>
        </div>

        <!-- Success Metrics -->
        <div style="margin-top: 30px; padding: 25px; background: #f0fff4; border-left: 5px solid #48bb78; border-radius: 10px;">
            <h3 style="color: #2f855a; margin-bottom: 15px;">üéØ MVP Success Metrics</h3>
            <ul style="color: #4a5568; line-height: 1.8; margin-left: 20px;">
                <li>‚úÖ User can scan a tag and get results in under 5 seconds</li>
                <li>‚úÖ Gemini Vision accurately extracts material & country 80%+ of the time</li>
                <li>‚úÖ Eco-score is calculated and displayed with explanation</li>
                <li>‚úÖ Scan history is saved and retrievable</li>
                <li>‚úÖ App works smoothly on both iOS and Android</li>
                <li>‚úÖ Basic error handling and loading states implemented</li>
            </ul>
        </div>
    </div>

    <div style="text-align: center; color: white; margin-top: 30px; padding: 20px;">
        <p style="font-size: 1.2em;">üåø Built for HackNYU Fall 2025</p>
        <p style="margin-top: 10px; opacity: 0.8;">Making sustainable fashion choices easier, one scan at a time.</p>
    </div>
</body>
</html>